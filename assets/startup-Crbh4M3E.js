import{bP as y,co as j,bv as f,c7 as U,cp as q,cq as $,bu as L,c6 as W,cr as _,cs as d,ct as J,cu as z,bG as k,by as S,cd as V,cv as X,bx as Y,cw as K,bo as r,bC as o,bn as l,cx as Q,bp as Z,ce as w,cy as B,cz as N,bE as b,cA as ee,cB as H,bX as P,bI as x,bH as O,bJ as R,bD as T,cC as te,cD as ne,cE as ae,cF as oe,cG as re,cH as C,cI as ie}from"./links-V1_eT2ZR.js";const se=[{element:"nameInput",func:function(){y()}},{element:"researchTeam",func:function(){j(),f()}},{element:"fileUpload",handler:"change",func:function(){U(this)}},{element:"portalglyphsInput",func:function(){q(this),$(),y()}},{element:"discoveredInput",func:function(){L("discoveredInput","discoveredlinkInput"),f()}},{element:"discoveredlinkInput",func:function(){L("discoveredlinkInput","discoveredInput"),f()}},{element:"docbyInput",func:function(){f()}},{element:"axesInput",handler:"change",func:function(){W()}},{element:"glyphDeleteButton",handler:"click",func:function(){_()}},{element:"fileUploadTooltip",handler:"click",func:function(){d.uploadShown=!0}},{element:"galleryFileUploadTooltip",handler:"click",func:function(){d.galleryUploadShown=!0}}];J(),z(),k(K),S(se),V();const le={output:{explanationHeading:"explanationHeading",explanationContent:"explanationContent",explanationLink:"explanationLink",explanationWebpImg:"explanationWebpImg",explanationFallbackImg:"explanationFallbackImg"}},D=r.output.explanation;D&&(D.innerHTML=X),k(le);const ce=["builderInput","builderlinkInput","discoveredInput","discoveredlinkInput"];for(const e of ce){const t=r.input[e];t&&(t.dataset.player="")}function ue(){var e,t;const n=document.querySelectorAll(".table .data input, .table .data textarea"),a=document.querySelectorAll(".table .data select"),i=document.getElementsByTagName("output");for(const e of Array.from(n))switch(e.type.toLowerCase()){case"checkbox":e.checked=!1;break;case"radio":const t=document.querySelectorAll('input[type="radio"]:not([checked])'),n=document.querySelectorAll('input[type="radio"][checked]');for(const e of Array.from(t))e.checked=!1;for(const e of Array.from(n))e.checked=!0;break;default:e.value=""}for(const n of Array.from(a))n.value=null==(t=null==(e=n.options)?void 0:e[0])?void 0:t.value;for(const e of Array.from(i))e.innerText="";Q();for(const e in l)delete l[e];const r=document.querySelectorAll(".error");for(const e of Array.from(r))Z(e.previousElementSibling);for(const e in w)delete w[e];"function"==typeof o.resetExternal&&o.resetExternal(),B(),N()}function v(e,t){var n,a,o,i;e.style.pointerEvents="none";const{innerText:c,dataset:{link:u}}=e;b.text=ee(JSON.stringify(l)),b.copy=!0,b.link=u;const s=H(e);if(s)return e.classList.remove("is-primary"),e.classList.add("is-danger"),e.innerText=s,void setTimeout((()=>{e.classList.remove("is-danger"),e.classList.add("is-primary"),e.innerText=c,e.style.pointerEvents=""}),1500);const d=(null==(i=null==(o=null==(a=null==(n=r)?void 0:n.output)?void 0:a[t])?void 0:o.innerText)?void 0:i.replaceAll("\n\n\n","\n\n"))??t;navigator.clipboard.writeText(d),b.copy=!0,b.link=u,e.innerText="Copied!",setTimeout((()=>{e.innerText=c,e.style.pointerEvents=""}),1500)}function de(e){const t=r.output.fullArticle.innerText.replaceAll("\n\n\n","\n\n"),n=l.name,a=e;a.href="data:text/plain,"+encodeURIComponent(t),a.download=n+".txt"}function F(e,t=l.name){e.style.pointerEvents="none";M(e,P+"Special:EditPage/"+t)}function M(e,t){const n=H(e),a=new RegExp(`[${["#","<",">","[","]","{","|","}"].join("")}]`,"g");if(n){const t=e.innerText;e.removeAttribute("href"),e.className="button is-danger",e.innerText=n,setTimeout((()=>{e.className="button is-outlined is-primary",e.innerText=t,e.style.pointerEvents=""}),1500)}else e.href=t.replace(a," "),e.target="_blank",e.rel="noopener noreferrer",e.style.pointerEvents=""}function He(){var e;if("function"!=typeof o.redirectPage)return;const t=document.getElementById("reset"),n=["copyRedirect","createRedirect"],a=document.createElement("p");if(a.id="redirectNote",a.classList.add("has-text-centered"),a.innerText="Please create a redirect for your page!",!o.redirectPage())return n.forEach((()=>{const e=t.previousElementSibling;n.includes(e.id)&&e.remove()})),void(null==(e=document.getElementById(a.id))||e.remove());const i=document.createElement("button");i.innerText="Copy Redirect Code",i.type="button";const r=document.createElement("a");r.rel="noopener noreferrer",r.target="_blank",r.innerText="Create Redirect",S([{element:i,handler:"click",func:function(){v(this,`#REDIRECT [[${l.name}]]`)}},{element:r,handler:"click",func:function(){F(this,o.redirectPage())}}]);const c=[i,r];for(let e=0;e<c.length;e++){const a=c[e],o=n[e];if(document.getElementById(o))return;a.classList.add("button","is-outlined","is-primary"),a.id=o,a.dataset.link="redirect",t.insertAdjacentElement("beforebegin",a)}t.parentElement.insertAdjacentElement("beforebegin",a)}Y();const pe='\n<button class="button is-outlined is-primary" id="copy" type="button" data-link="page" data-evt-id="copyButton">Copy Wikicode</button>\n<a class="button is-outlined is-primary" id="download" data-evt-id="downloadButton">Download File</a>\n<a class="button is-outlined is-primary" href="https://nomanssky.fandom.com/wiki/Special:Upload?multiple=true" id="uploadLink" rel="noopener noreferrer" target="_blank">Upload Pictures</a>\n<a class="button is-outlined is-primary" id="create" data-link="page" data-evt-id="createPageButton">Create Page</a>\n<button class="button is-warning" id="reset" type="reset" data-evt-id="resetButton">Reset Inputs</button>',me=[{element:"copyButton",handler:"click",func:function(){v(this,"fullArticle")}},{element:"downloadButton",handler:"click",func:function(){de(this)}},{element:"createPageButton",handler:"click",func:function(){F(this)}},{element:"resetButton",handler:"click",func:()=>ue()}],be=x(pe,{},me),fe='<p class="has-text-centered">You must copy the code first, then paste it into the wiki page.<br>Also don\'t forget to upload any images you have put here.</p>',E=r.output.actions;E.innerHTML="",O(be,E,"afterbegin"),E.insertAdjacentHTML("beforebegin",fe);const ye='\n<label style="display:flex; gap: .3rem"><input class="checkbox" type="checkbox" id="skipCheck" data-evt-id="skipCheck">Enable debug (no checks, no popups)</label>;\n<button style="margin: 0 1rem" class="button is-danger is-small" id="clearCache" data-evt-id="clearCache">Clear Localstorage</button>',he=[{element:"clearCache",handler:"click",func:()=>localStorage.clear()},{element:"skipCheck",handler:"change",func:function(){const e=this.checked;d.debug=e,d.uploadShown=e,d.galleryUploadShown=e,document.documentElement.dataset.debug=e.toString(),y()}}];r.output.actions,x(ye,{},he),Object.defineProperty(d,"debug",{configurable:!1,writable:!1,value:!1});const h=document.getElementById("skipCheck");h&&new URLSearchParams(window.location.search).has("debug")&&(h.checked=!0,R(h,"change"));const ge='<h2 class="title is-5 has-text-left has-text-weight-bold mb-2">\x3c!--<output id="hubname" name="hubname"></output>  //NOSONAR\n\t(this is fine since this snippet is inserted somewhere else)--\x3e\n\t<output id="albumHeaderName" name="name"></output> entry for <output id="system" name="system"></output>:\n</h2>\n<div id="albumText" class="wikiText">\n  This category is for content related to the \'\'\'<output id="system" name="system"></output>\'\'\' [[system]].\n  <br>\n  <br>\n  [[Category: Systems]]\n  <br>\n  [[Category: <output id="region" name="region"></output>]]\n</div>\n',ke='<button id="albumBtn" class="button is-outlined is-primary"\n\t   data-link="album" data-evt-id="copyButton">\n\t   Copy Category Wikicode\n\t   </button>\n\t   <a class="button is-outlined is-primary" id="albumLink"\n\t   data-link="album" data-evt-id="openAlbumButton">\n\t   Open Category\n\t   </a>',xe=[{element:"copyButton",handler:"click",func:function(){v(this,"albumText")}},{element:"openAlbumButton",handler:"click",func:function(){ve(this)}}],Te=x(ke,{},xe);function ve(e){e.style.pointerEvents="none";const t="function"==typeof o.albumLinkGen?o.albumLinkGen():l.catalogue?l.catalogue:(console.warn("No wiki page provided. Define the function `albumLinkGen()` and add it to the `globalFunctions` object or define a catalogue in the `pageData.catalogue` property!"),void(e.style.pointerEvents=""));t&&M(e,P+t)}function Ee(){const e="function"==typeof o.albumItemTypeExternal?o.albumItemTypeExternal():l.type;r.output.album.innerText=e}function Ie(){const e="function"==typeof o.albumDescExternal?o.albumDescExternal():"",t=r.output.albumDesc;t&&(t.innerText=e)}function Le(){const e=(()=>{if("function"==typeof o.albumDiscovererExternal)return o.albumDiscovererExternal();{const{discovered:e,discoveredlink:t}=l;return t?`wiki=${t}`:`discoverer=${e}`}})(),t=r.output.albumDiscoverer;t&&(t.innerText=e)}function we(){const e="function"==typeof o.albumNameExternal?o.albumNameExternal():l.name;r.output.albumName.innerText=e}function Ce(){const e="function"==typeof o.albumOtherExternal?o.albumOtherExternal():"",t=r.output.albumOther;t&&(t.innerText=e)}function De(){const e="function"==typeof o.albumTypeExternal?o.albumTypeExternal():"";r.output.albumType.innerText=e}function Ae(){const e={albumHeaderName:"name",albumImage:"image",albumGlyphs:"portalglyphs"};for(const t in e){r.output[t].innerText=l[e[t]]}}function Pe(){function e(){Ae(),Le(),we(),Ce(),De(),Ee(),Ie()}l.albumInitialised?e():document.addEventListener("albumLoaded",(()=>e()))}const Se={output:{album:"album",albumType:"albumType",albumHeaderName:"albumHeaderName",albumImage:"albumImage",albumName:"albumName",albumOther:"albumOther",albumGlyphs:"albumGlyphs",albumDiscoverer:"albumDiscoverer",albumText:"albumText",albumDesc:"albumDesc"}},A=r.output.albumEntry,g=r.output.albumActions;A instanceof HTMLDivElement&&(A.innerHTML=ge),g instanceof HTMLDivElement&&(O(Te,g,"afterbegin"),k(Se),document.dispatchEvent(new Event("albumLoaded")),T("albumInitialised",!0),g.insertAdjacentHTML("afterbegin",'<p style="width:100%" class="has-text-centered mb-3">Please don\'t forget to create a category entry!</p>')),te(r.output.portalglyphButtons,"portalglyphsInput");const Be=ne();T("pageType",Be),ae(),B(),oe(),d.uploadShown=!0,d.galleryUploadShown=!0,N(),d.debug||(d.uploadShown=!1,d.galleryUploadShown=!1),y();const G=r.output.output;G.onmousedown=()=>re();for(const e of Array.from(G.children)){const t=e;t.onmouseup=e=>C(e.target),t.ontouchend=e=>C(e.target)}ie();try{R(r.input.portalglyphsInput,"input")}catch{}T("eventListeners",!0);export{we as a,Ce as b,Le as c,Pe as d,v as e,ve as f,Te as g,Ie as h,Ee as i,He as t};
